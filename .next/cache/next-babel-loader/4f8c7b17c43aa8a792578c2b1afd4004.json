{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useReducer } from \"react\";\nimport axios from \"axios\";\n\nvar dataFetchReducer = function dataFetchReducer(state, action) {\n  switch (action.type) {\n    case \"FETCH_INIT\":\n      return _objectSpread({}, state, {\n        isLoading: true,\n        isError: false\n      });\n\n    case \"FETCH_SUCCESS\":\n      return _objectSpread({}, state, {\n        isLoading: false,\n        hasErrored: false,\n        errorMessage: \"\",\n        data: action.payload\n      });\n\n    case \"FETCH_FAILURE\":\n      return _objectSpread({}, state, {\n        isLoading: false,\n        hasErrored: true,\n        errorMessage: \"Data Retrieve Failure\"\n      });\n\n    case \"REPLACE_DATA\":\n      // The record passed (state.data) must have the attribute \"id\"\n      var newData = state.data.map(function (rec) {\n        return rec.id === action.replacerecord.id ? action.replacerecord : rec;\n      });\n      return _objectSpread({}, state, {\n        isLoading: false,\n        hasErrored: false,\n        errorMessage: \"\",\n        data: newData\n      });\n\n    default:\n      throw new Error();\n  }\n};\n\nvar useAxiosFetch = function useAxiosFetch(initialUrl, initialData) {\n  var _useState = useState(initialUrl),\n      url = _useState[0];\n\n  var _useReducer = useReducer(dataFetchReducer, {\n    isLoading: false,\n    hasErrored: false,\n    errorMessage: \"\",\n    data: initialData\n  }),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  useEffect(function () {\n    var didCancel = false;\n\n    var fetchData = function fetchData() {\n      var result;\n      return _regeneratorRuntime.async(function fetchData$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              dispatch({\n                type: \"FETCH_INIT\"\n              });\n              _context.prev = 1;\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(axios.get(url));\n\n            case 4:\n              result = _context.sent;\n\n              if (!didCancel) {\n                dispatch({\n                  type: \"FETCH_SUCCESS\",\n                  payload: result.data\n                });\n              }\n\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](1);\n\n              if (!didCancel) {\n                dispatch({\n                  type: \"FETCH_FAILURE\"\n                });\n              }\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[1, 8]], Promise);\n    };\n\n    fetchData();\n    return function () {\n      didCancel = true;\n    };\n  }, [url]);\n\n  var updateDataRecord = function updateDataRecord(record) {\n    dispatch({\n      type: \"REPLACE_DATA\",\n      replacerecord: record\n    });\n  };\n\n  return _objectSpread({}, state, {\n    updateDataRecord: updateDataRecord\n  });\n};\n\nexport default useAxiosFetch;","map":{"version":3,"sources":["C:/Authentication-react-hooks/src/useAxiosFetch.js"],"names":["React","useState","useEffect","useReducer","axios","dataFetchReducer","state","action","type","isLoading","isError","hasErrored","errorMessage","data","payload","newData","map","rec","id","replacerecord","Error","useAxiosFetch","initialUrl","initialData","url","dispatch","didCancel","fetchData","get","result","updateDataRecord","record"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useReducer } from \"react\";\nimport axios from \"axios\";\n\nconst dataFetchReducer = (state, action) => {\n  switch (action.type) {\n    case \"FETCH_INIT\":\n      return { ...state, isLoading: true, isError: false };\n    case \"FETCH_SUCCESS\":\n      return {\n        ...state,\n        isLoading: false,\n        hasErrored: false,\n        errorMessage: \"\",\n        data: action.payload\n      };\n    case \"FETCH_FAILURE\":\n      return {\n        ...state,\n        isLoading: false,\n        hasErrored: true,\n        errorMessage: \"Data Retrieve Failure\"\n      };\n    case \"REPLACE_DATA\":\n      // The record passed (state.data) must have the attribute \"id\"\n      const newData = state.data.map(rec => {\n        return rec.id === action.replacerecord.id ? action.replacerecord : rec;\n      });\n      return {\n        ...state,\n        isLoading: false,\n        hasErrored: false,\n        errorMessage: \"\",\n        data: newData\n      };\n    default:\n      throw new Error();\n  }\n};\n\nconst useAxiosFetch = (initialUrl, initialData) => {\n  const [url] = useState(initialUrl);\n\n  const [state, dispatch] = useReducer(dataFetchReducer, {\n    isLoading: false,\n    hasErrored: false,\n    errorMessage: \"\",\n    data: initialData\n  });\n\n  useEffect(() => {\n    let didCancel = false;\n\n    const fetchData = async () => {\n      dispatch({ type: \"FETCH_INIT\" });\n\n      try {\n        let result = await axios.get(url);\n        if (!didCancel) {\n          dispatch({ type: \"FETCH_SUCCESS\", payload: result.data });\n        }\n      } catch (err) {\n        if (!didCancel) {\n          dispatch({ type: \"FETCH_FAILURE\" });\n        }\n      }\n    };\n\n    fetchData();\n\n    return () => {\n      didCancel = true;\n    };\n  }, [url]);\n\n  const updateDataRecord = record => {\n    dispatch({\n      type: \"REPLACE_DATA\",\n      replacerecord: record\n    });\n  };\n\n  return { ...state, updateDataRecord };\n};\n\nexport default useAxiosFetch;\n"]},"metadata":{},"sourceType":"module"}